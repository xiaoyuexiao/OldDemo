<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script type="text/javascript" src="../js/jquery-3.3.1.min.js"></script>
</head>
<body>
	<input id="headpic"  type="file">
	<form action="../../upImg" enctype="multipart/form-data" method="post">
		<input type="file" name="file">
		<input type="submit" name="">
	</form>
</body>
<script type="text/javascript">

	$(function(){
		$("#headpic").change(function(){
			uploadFiles(this.files[0]);
		})
	})
	function uploadFiles(imgdata){   
	    //var uploadFile = new FormData($("#headpic")[0]);
	    let form_data=new FormData();
            form_data.append('file', imgdata);

	        $.ajax({  
	            url:'../../upImg',  
	            type:'POST',  
	            data:form_data,  
	            async: false,    
	            cache: false,   
	            contentType: false, //不设置内容类型  
	            processData: false, //不处理数据  
	            success:function(data){  
	                console.log(data);  
	                alert(data.msg);  
	            },  
	            error:function(){  
	                alert("上传失败！");  
	            }  
	        }) 
	}
</script>
</html>